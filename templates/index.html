{% extends 'base.html' %}

{% block title %}Dashboard{% endblock %}

{% block content %}
<h2>Leave Requests</h2>

<div style="margin-bottom: 20px;">
    <a href="/add" class="btn btn-primary">+ Apply for Leave</a>
</div>

{% if leaves %}
<table>
    <thead>
        <tr>
            <th>ID</th>
            <th>Employee</th>
            <th>Type</th>
            <th>From</th>
            <th>To</th>
            <th>Status</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for leave in leaves %}
        <tr>
            <td>{{ leave.id }}</td>
            <td>{{ leave.employee_name }}</td>
            <td>{{ leave.leave_type }}</td>
            <td>{{ leave.start_date.strftime('%Y-%m-%d') }}</td>
            <td>{{ leave.end_date.strftime('%Y-%m-%d') }}</td>
            <td><span class="status-{{ leave.status.lower() }}">{{ leave.status }}</span></td>
            <td>
                <a href="/view/{{ leave.id }}" class="btn btn-secondary btn-sm">View</a>
                <a href="/edit/{{ leave.id }}" class="btn btn-secondary btn-sm">Edit</a>
                <form action="/delete/{{ leave.id }}" method="POST" style="display:inline;">
                    <button type="submit" class="btn btn-danger btn-sm" onclick="return confirm('Delete this leave?')">Delete</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endif %}
{% endblock %}
